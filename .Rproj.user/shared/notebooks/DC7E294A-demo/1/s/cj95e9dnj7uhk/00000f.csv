"0",""
"0","#textrecipes contain extra steps for the recipes package for preprocessing text data."
"0","library(textrecipes)"
"0",""
"0","# make a recipe using the training data ####"
"0","tte_recipe <-"
"0","  recipes::recipe(formula = .time + .status ~ ., data = data_train) %>%"
"0","  recipes::update_role(.id, new_role = ""id"") %>%"
"0","  recipes::update_role(c(.time, .status), new_role = ""outcome"") %>%"
"0","  recipes::step_impute_knn(recipes::all_predictors(), -.trt) %>%"
"0","  recipes::step_naomit(recipes::all_predictors()) %>%"
"0","  recipes::step_nzv(recipes::all_predictors(),"
"0","                    freq_cut = 95 / 5,"
"0","                    unique_cut = 10) #%>%"
"0","  #recipes::step_normalize(recipes::all_numeric_predictors()) %>%"
"0"," # recipes::step_corr(recipes::all_numeric_predictors(), threshold = 0.75)#%>%"
"0",""
"0","#print(tte_recipe)"
"0",""
"0","#prepare new data####"
"0","prep_tte_recipe <- tte_recipe %>%"
"0","  recipes::prep()"
"0",""
"0","print(prep_tte_recipe)"
"1","
"
"1","[36mâ”€â”€[39m [1mRecipe[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
"
"1","
"
"1","â”€â”€ Inputs 
"
"1","Number of variables by role
"
"1","outcome:    2
predictor: 21
id:         1
"
"1","
"
"1","â”€â”€ Training information 
"
"1","Training data contained 1481 data points and 136 incomplete rows.
"
"1","
"
"1","â”€â”€ Operations 
"
"1","[36mâ€¢[39m K-nearest neighbor imputation for: [34mbm01[39m, [34mbm02[39m, [34mbm03[39m, [34mbm04[39m, [34mbm05[39m, [34mbm06[39m, [34mbm07[39m, [34mbm08[39m, [34mbm09[39m, [34mbm10[39m, [34mbm11[39m, [34mbm12[39m, [34mbm13[39m, [34mbm14[39m, [34mbm15[39m, [34mbm16[39m, ... | [3mTrained[23m
"
"1","[36mâ€¢[39m Removing rows with NA values in: [34mbm01[39m, [34mbm02[39m, [34mbm03[39m, [34mbm04[39m, [34mbm05[39m, [34mbm06[39m, [34mbm07[39m, [34mbm08[39m, [34mbm09[39m, [34mbm10[39m, [34mbm11[39m, [34mbm12[39m, [34mbm13[39m, [34mbm14[39m, [34mbm15[39m, [34mbm16[39m, [34mbm17[39m, ... | [3mTrained[23m
"
"1","[36mâ€¢[39m Sparse, unbalanced variable filter removed: [34m<none>[39m | [3mTrained[23m
"
"0","prep_data_test <- recipes::bake(object = prep_tte_recipe, new_data = data_test)"
"0",""
"0","prep_data_train <- recipes::juice(prep_tte_recipe)"
"0",""
"0",""
"0","# inspect data ####"
"0","data_prep <- prep_data_train %>%"
"0","  bind_rows(prep_data_test)"
"0",""
"0","#Uncomment next line to save the outcome"
"0","qs::qsave(data_prep, here::here(""Data"", ""data_prep.qs""))"
"0",""
"0",""
